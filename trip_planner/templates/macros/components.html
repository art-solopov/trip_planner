{%- set uncollapsed_class = "open" -%}

{% macro collapsible(title, el_id, collapsed=True) -%}
    <details class="collapsible" data-controller="collapsible" data-action="toggle->collapsible#toggle">
        <summary class="plume">{{ title }}</summary>
        <div id="{{ el_id }}" class="collapse">{{ caller() }}</div>
    </details>

{%- endmacro %}

{% macro collapsible_map(title, el_id, latlon, collapsed=True) -%}
    {% call collapsible("Map", el_id=el_id, collapsed=collapsed) %}
    <div class="map-with-coords" hx-get="{{ url_for('pjax.map_pointer', latlon=latlon) }}" hx-trigger="collapsible.opened once from:closest .collapsible"></div>
    {% endcall %}
{%- endmacro %}

{% macro map_pointer_mount(center_lat, center_lon) %}
    <div class=""
         data-map-pointer-target="map"
         data-center-lat="{{ center_lat }}"
         data-center-lon="{{ center_lon }}"></div>
{%- endmacro %}
